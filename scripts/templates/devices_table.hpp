/// Generated by Devgen 
/// DO NOT EDIT
///
/// (c) Koheron

#ifndef __DEVICES_TABLE_HPP__
#define __DEVICES_TABLE_HPP__

#include <array>
#include <sstream>
#include <string>

{% for device in devices -%}
{% for include in device.includes -%}
#include "{{ include }}"
{% endfor -%}
{% endfor %}

#define DEVICES_TABLE(ENTRY) \
{% for device in devices -%}
    {% if not loop.last -%}
        ENTRY( {{device.tag}}, {{device.class_name}}, {{ device | list_operations(max_op_num) }} ) \
    {% else -%}
        ENTRY( {{device.tag}}, {{device.class_name}}, {{ device | list_operations(max_op_num) }} )
    {% endif -%}
{% endfor %}

/// Maximum number of operations
#define MAX_OP_NUM {{max_op_num}}

/// Devices #
typedef enum {
    NO_DEVICE = 0,
    KSERVER = 1,
    {% for device in devices -%}
    {{ device.tag | upper }} = {{ device.id }},
    {% endfor -%}
    device_num
} device_t;

inline auto build_devices_json() {
    std::stringstream ss;
    ss << "{{ json }}";
    return ss.str();
}

#endif // __DEVICES_TABLE_HPP__
